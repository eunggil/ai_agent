# AI Agent Environment Variables Example
# Copy this file to .env and fill in your values

# ============================================
# GCP Configuration
# ============================================
GCP_PROJECT_ID=your-gcp-project-id
GCP_REGION=us-central1

# ============================================
# Environment
# ============================================
ENVIRONMENT=development
LOG_LEVEL=INFO
API_VERSION=v1

# ============================================
# Authentication
# ============================================
# Local development: gcloud auth application-default login
# GCP 서비스 계정 키 파일 절대경로
# 발급: GCP 콘솔 → IAM → 서비스 계정 → 키 추가 → JSON 다운로드
GOOGLE_APPLICATION_CREDENTIALS=/path/to/your-service-account.json

# Production: Use Secret Manager
# GOOGLE_APPLICATION_CREDENTIALS=/app/credentials/vertex-ai-key.json

# ============================================
# Database Configuration
# ============================================
# Mock DB (for quick AI agent development)
USE_MOCK_VECTOR_DB=true
USE_MOCK_GRAPH_DB=true

# PostgreSQL (when USE_MOCK_VECTOR_DB=false)
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=ai_agent
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_MAX_CONNECTIONS=20

# Redis (optional - for caching and LangGraph checkpointer)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# ============================================
# AI Provider 설정
# ============================================
# 옵션 1: Vertex AI (기본) - 실제 Gemini 호출, GCP 인증 필요
#   gcloud auth application-default login
AI_PROVIDER=vertex

# 옵션 2: 로컬 LLM (Ollama) - 비용 없음, Ollama 설치 필요
#   brew install ollama && ollama serve && ollama pull llama3
# AI_PROVIDER=local
# OLLAMA_BASE_URL=http://localhost:11434
# LOCAL_MODEL=llama3
# LOCAL_MODEL_TIMEOUT=120

# ============================================
# Vertex AI Configuration
# ============================================
VERTEX_AI_MODEL=gemini-1.5-flash
VERTEX_AI_LOCATION=us-central1

# Imagen 4 이미지 생성 (MEDIA_PROVIDER=vertex 또는 vertex_imagen)
VERTEX_AI_IMAGEN_MODEL=imagen-4.0-fast-generate-001
# 이미지에 SynthID 워터마크 삽입 여부 (기본: false)
IMAGEN_WATERMARK=false

# Veo 3.1 영상 생성 (MEDIA_PROVIDER=vertex 또는 vertex_veo)
VERTEX_VEO_MODEL=veo-3.1-fast-generate-001
# Veo 출력 영상이 저장될 GCS 버킷 (필수)
# 생성: gsutil mb -l us-central1 gs://your-bucket-name
VERTEX_VEO_GCS_BUCKET=your-bucket-name
# Veo 생성 대기 최대 시간(초) - 고품질 모델은 더 오래 걸림
VEO_TIMEOUT_SECONDS=600

# Model Parameters
VERTEX_AI_TEMPERATURE=0.7
VERTEX_AI_MAX_TOKENS=2048
VERTEX_AI_TOP_P=0.95
VERTEX_AI_TOP_K=40

# ============================================
# Vector Search Configuration
# ============================================
VECTOR_DIMENSION=128
VECTOR_SIMILARITY_THRESHOLD=0.7
VECTOR_TOP_K=20

# ============================================
# 미디어 생성 설정 (이미지/영상)
# ============================================
# 미디어 프로바이더 선택:
#   none            → 텍스트만 생성 (기본값, 빠름)
#   vertex_imagen   → Vertex AI Imagen (GCP 인증 필요)
#   local_diffusers → 로컬 GPU + Diffusers (requirements-media.txt 설치 필요)
#   replicate       → Replicate API (API 토큰 필요, 로컬 GPU 불필요)
MEDIA_PROVIDER=none

# 생성할 미디어 타입: image | video | text
MEDIA_TYPE=image

# 이미지 모델 선택 (local_diffusers / replicate 공통):
#   lcm-lora-sdxl    SDXL + LCM-LoRA  4스텝, 빠름, 고품질 (VRAM 8GB+)  ← 권장
#   lcm-lora-sd15    SD1.5 + LCM-LoRA 4스텝, 빠름, 가벼움 (VRAM 4GB+)
#   sdxl             SDXL 기본         20스텝, 느림, 최고품질
#   sd15             SD1.5 기본        20스텝, 느림, 가벼움
#   flux-schnell     Flux Schnell      (replicate 전용)
IMAGE_MODEL=lcm-lora-sdxl

# 영상 모델 선택:
#   animatediff-lcm  AnimateDiff + LCM (local_diffusers 전용)
#   animate-diff     AnimateDiff v2    (replicate 전용)
#   svd              Stable Video Diffusion (replicate 전용)
VIDEO_MODEL=animatediff-lcm

# 로컬 Diffusers 설정
DIFFUSERS_DEVICE=auto   # auto | cuda | mps | cpu
MEDIA_OUTPUT_DIR=/tmp/ai_agent_media

# Replicate API 토큰 (MEDIA_PROVIDER=replicate 일 때)
# REPLICATE_API_TOKEN=your-token

# ============================================
# AI Agent Configuration
# ============================================
# Agent Pipeline
AGENT_MAX_ITERATIONS=5
AGENT_TIMEOUT_SECONDS=30

# Ad Ranking
AD_MAX_CANDIDATES=10
AD_REVENUE_WEIGHT=0.6
AD_FITNESS_WEIGHT=0.4

# Brand Safety
BRAND_SAFETY_ENABLED=true
BRAND_SAFETY_THRESHOLD=0.8

# ============================================
# Caching
# ============================================
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# ============================================
# Monitoring & Logging
# ============================================
ENABLE_TRACE=true
ENABLE_METRICS=true
LOG_FORMAT=json

# ============================================
# Feature Flags
# ============================================
FEATURE_AI_GENERATION=true
FEATURE_HYBRID_SEARCH=true
FEATURE_VTO=false
